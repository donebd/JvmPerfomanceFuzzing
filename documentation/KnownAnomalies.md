
# Известные и уникальные аномалии, найденные JVM Performance Fuzzer

**Этот файл содержит описание аномалий производительности JVM, выявленных с помощью фаззера.
Здесь отражены как типовые (известные) проблемы JVM, так и уникальные случаи, ставшие предметом публичного обсуждения и баг-репортов.**

> ⚡️ *Список регулярно актуализируется по мере обнаружения новых аномалий и получения обратной связи от сообщества JVM.*

---

## Типовые аномалии (известны в сообществе, **тикеты не заводились**)

### Ранний StackOverflowError в OpenJ9

* **Суть:**
  На одинаковом коде с глубокой рекурсией OpenJ9 выбрасывает `StackOverflowError` заметно раньше, чем HotSpot или GraalVM.
* **Проявление:**
  Для одной и той же глубины рекурсии OpenJ9 завершает выполнение с ошибкой, в то время как другие JVM продолжают работу.
* **Тип аномалии:**
  Ошибки исполнения, различия в лимитах стека.

---

### Рост задержек и потребления памяти при boxing/unboxing на HotSpot

* **Суть:**
  При частых операциях boxing/unboxing (особенно с коллекциями) HotSpot демонстрирует худшие метрики времени и памяти по сравнению с GraalVM и OpenJ9.
* **Проявление:**
  Увеличение задержек, рост потребления памяти на длинных сериях микробенчмарков.
* **Тип аномалии:**
  Производительность (time, memory).

---

### Неоптимальная работа `switch` на строках (String) в GraalVM

* **Суть:**
  На ряде версий GraalVM и OpenJ9 (и ранее — на HotSpot) реализована менее эффективная обработка больших switch-case по строкам (String), что приводит к росту времени на разбор и падению производительности по сравнению с классическими enum/int.
* **Проявление:**
  Мутированные фаззером программы с генерацией больших switch-case по строкам работают на GraalVM значительно медленнее, чем на HotSpot (int), из-за отсутствия оптимизации hash/switch.
* **Тип:**
  Производительность (time).

---

### Медленная инициализация больших массивов в OpenJ9

* **Суть:**
  При массовой инициализации больших массивов (int\[]/byte\[] в >100\_000 элементов) OpenJ9 может показывать худшую производительность, чем HotSpot и GraalVM, из-за особенностей реализации zeroing/new-array.
* **Проявление:**
  Фаззер способен сгенерировать бенчмарки, где OpenJ9 на длинных массивах заметно медленнее.
* **Тип:**
  Time/memory.

---

## Уникальные/редкие аномалии (**тикеты заведены, не были известны до эксперимента**)

### Сильная деградация MergeSort на OpenJ9 (3–4x медленнее остальных JVM)

**[Оформлено как публичный issue → OpenJ9 #21947](https://github.com/eclipse-openj9/openj9/issues/21947)**

* **Суть:**
  Мутированный MergeSort (автоматически сгенерированный фаззером) выполняется в 3–4 раза медленнее на OpenJ9, чем на HotSpot и GraalVM, хотя исходный (немутированный) код быстрее на OpenJ9.
* **Проявление:**
  Изменённая структура кода приводит к деградации JIT-оптимизаций OpenJ9, что стабильно воспроизводится на разных входных данных и версиях JVM.
* **Тип аномалии:**
  Производительность (time).
* **Отчёты и примеры:**

    * В тикете приложены исходные и мутированные версии MergeSort, отчёты JMH, анализ JIT.
    * Описание, воспроизведение, бенчмарки — всё публично.

---


